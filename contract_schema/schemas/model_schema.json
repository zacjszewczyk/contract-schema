{
    "title": "Model Schema",
    "description": "Standard manifest for saved machine-learning models.",
    "version": "1.1.3",
    "input": {
        "title": "Model Input Schema",
        "type": "object",
        "description": "Parameter block passed to a script when executed.",
        "fields": {
            "log_path": {
                "type": [
                    "string"
                ],
                "required": false,
                "default": "stdout",
                "description": "Filesystem path or stream for execution logs. Default 'stdout'. Supports 'stdout' and filestystem paths."
            },
            "output": {
                "type": [
                    "string"
                ],
                "required": false,
                "default": "stdout",
                "description": "Destination for the notebook's findings. Supports 'stdout' or a file path."
            },
            "verbosity": {
                "type": [
                    "string"
                ],
                "required": false,
                "enum": [
                    "DEBUG",
                    "INFO",
                    "WARN",
                    "ERROR",
                    "FATAL"
                ],
                "default": "INFO",
                "description": "Lowest log-severity level that will be emitted (default INFO)."
            }
        }
    },
    "output": {
        "title": "Model Output Schema",
        "type": "object",
        "description": "Structured metadata emitted after execution.",
        "fields": {
            "input_schema_version": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "Echo of the input contract version used for this run."
            },
            "initialization_dtg": {
                "type": [
                    "string"
                ],
                "required": true,
                "format": "date-time",
                "description": "UTC timestamp (ISO-8601) when the ModelManifest object was instantiated."
            },
            "finalization_dtg": {
                "type": [
                    "string"
                ],
                "required": true,
                "format": "date-time",
                "description": "UTC timestamp (ISO-8601) when ModelManifest.finalise() completed."
            },
            "total_runtime_seconds": {
                "type": [
                    "integer"
                ],
                "required": true,
                "description": "Elapsed seconds between initialization_dtg and finalization_dtg."
            },
            "output_schema_version": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "Semantic-version identifier for this output contract."
            },
            "run_id": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "Globally unique identifier (UUID v4 recommended) assigned at run start."
            },
            "execution_environment": {
                "type": [
                    "object"
                ],
                "required": true,
                "description": "Software and hardware context in which the model was trained.",
                "fields": {
                    "python_version": {
                        "type": [
                            "string"
                        ],
                        "required": true,
                        "description": "Exact Python interpreter version (e.g., \"3.10.12\")."
                    },
                    "library_dependencies": {
                        "type": [
                            "object"
                        ],
                        "required": true,
                        "description": "Map of critical libraries with exact versions (e.g., {\"scikit-learn\":\"1.3.0\"})."
                    },
                    "operating_system": {
                        "type": [
                            "string"
                        ],
                        "required": true,
                        "description": "OS name and version the training ran on."
                    },
                    "username": {
                        "type": [
                            "string"
                        ],
                        "required": true,
                        "description": "User account that executed the training script."
                    },
                    "hardware_specs": {
                        "type": [
                            "object"
                        ],
                        "required": true,
                        "description": "Key hardware details (CPU, GPU, RAM).",
                        "fields": {
                            "cpu": {
                                "type": [
                                    "string"
                                ],
                                "required": true,
                                "description": "The model of the central processing unit (CPU) used for training."
                            },
                            "gpu": {
                                "type": [
                                    "string"
                                ],
                                "required": false,
                                "description": "The model of the graphics processing unit (GPU) used for training, if applicable."
                            },
                            "ram": {
                                "type": [
                                    "string"
                                ],
                                "required": true,
                                "description": "The total system memory (RAM) available during training (e.g., '16GB')."
                            }
                        },
                        "additionalProperties": false
                    }
                },
                "additionalProperties": false
            },
            "author": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "The name of the primary author."
            },
            "author_organization": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "The name of the organization or institution of which the author was a part at the time of execution."
            },
            "contact": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "An email address or link for questions and comments."
            },
            "contributors": {
                "type": [
                    "object"
                ],
                "required": false,
                "description": "A list of individuals who contributed to the project."
            },
            "license": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "The software license under which the code or outputs are released."
            },
            "documentation_link": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "A URL to a research paper, blog post, or other resource for more information."
            },
            "status": {
                "type": [
                    "string"
                ],
                "required": true,
                "enum": [
                    "success",
                    "fail",
                    "warning",
                    "UNKNOWN"
                ],
                "description": "High-level execution outcome."
            },
            "exit_code": {
                "type": [
                    "integer"
                ],
                "required": true,
                "description": "Process exit status (0 = success; non-zero = failure)."
            },
            "messages": {
                "type": [
                    "list"
                ],
                "required": false,
                "description": "Ordered log entries generated during execution.",
                "items": {
                    "fields": {
                        "timestamp": {
                            "type": [
                                "string"
                            ],
                            "format": "date-time",
                            "required": true
                        },
                        "level": {
                            "type": [
                                "string"
                            ],
                            "enum": [
                                "DEBUG",
                                "INFO",
                                "WARN",
                                "ERROR",
                                "FATAL"
                            ],
                            "required": true
                        },
                        "text": {
                            "type": [
                                "string"
                            ],
                            "required": true
                        }
                    },
                    "additionalProperties": false
                }
            },
            "dataset_description": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "Free-text overview of the dataset used for training."
            },
            "dataset_size": {
                "type": [
                    "integer"
                ],
                "required": true,
                "description": "Total rows in the full dataset."
            },
            "dataset_hash": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "SHA-256 hash of the *full* dataset."
            },
            "data_schema": {
                "type": [
                    "object"
                ],
                "required": true,
                "description": "Map of feature names to expected data types."
            },
            "feature_names": {
                "type": [
                    "list"
                ],
                "subtype": "string",
                "required": true,
                "description": "Ordered list of features the model was trained on."
            },
            "inputs": {
                "type": [
                    "object"
                ],
                "required": true,
                "description": "Verbatim copy of the input parameter object for auditability."
            },
            "input_hash": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "SHA-256 (or stronger) hash of the canonicalised inputs object proving immutability."
            },
            "model_id": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "Canonical identifier of the model."
            },
            "model_type": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "High-level model family (e.g., \"RandomForest\")."
            },
            "model_architecture": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "Detailed architecture / layers (if NN)."
            },
            "model_version": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "Semantic version of the exported model."
            },
            "model_description": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "A brief, human-readable summary of the model's purpose and function."
            },
            "learning_task": {
                "type": [
                    "string"
                ],
                "required": true,
                "enum": [
                    "classification",
                    "regression",
                    "clustering",
                    "dimensionality_reduction",
                    "anomaly_detection",
                    "reinforcement_learning"
                ],
                "description": "High-level learning paradigm the model implements."
            },
            "intended_use": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "A clear statement about the model's designed application and business problem."
            },
            "target_feature": {
                "type": [
                    "string"
                ],
                "required": false,
                "description": "Name of the label or target column, if applicable."
            },
            "limitations": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "A description of known limitations, weaknesses, or scenarios where the model may underperform."
            },
            "feature_engineering_pipeline": {
                "type": [
                    "list"
                ],
                "subtype": "string",
                "required": true,
                "description": "Ordered descriptions of preprocessing steps."
            },
            "model_parameters": {
                "type": [
                    "object"
                ],
                "required": true,
                "description": "Key-value mapping of model parameters."
            },
            "max_number_trials": {
                "type": [
                    "integer"
                ],
                "required": false,
                "description": "Maximum number of hyper-parameter search trials allowed."
            },
            "actual_number_trials": {
                "type": [
                    "integer"
                ],
                "required": false,
                "description": "Actual number of hyper-parameter search trials run."
            },
            "train_size": {
                "type": [
                    "integer"
                ],
                "required": true,
                "description": "The number of rows in the final training dataset."
            },
            "train_splits": {
                "type": [
                    "integer"
                ],
                "required": false,
                "description": "Number of cross-validation splits on the training dataset."
            },
            "validation_size": {
                "type": [
                    "integer"
                ],
                "required": false,
                "description": "The number of rows in the validation dataset, if used."
            },
            "test_size": {
                "type": [
                    "integer"
                ],
                "required": false,
                "description": "The number of rows in the hold-out test dataset, if used."
            },
            "train_hash": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "SHA-256 hash of the final training dataset."
            },
            "validation_hash": {
                "type": [
                    "string"
                ],
                "required": false,
                "description": "SHA-256 hash of the validation dataset, if used."
            },
            "test_hash": {
                "type": [
                    "string"
                ],
                "required": false,
                "description": "SHA-256 hash of the hold-out test dataset, if used."
            },
            "random_seed": {
                "type": [
                    "integer"
                ],
                "required": true,
                "description": "Seed used for model training, for reproducibility."
            },
            "metrics": {
                "type": [
                    "object"
                ],
                "required": true,
                "description": "Key-value map of metric name to value(s) relevant to the learning task.",
                "additionalProperties": true
            },
            "training_duration_seconds": {
                "type": [
                    "number"
                ],
                "required": true,
                "description": "The total time, in seconds, that the model took to train."
            },
            "validation_duration_seconds": {
                "type": [
                    "number"
                ],
                "required": false,
                "description": "The total time, in seconds, that the model took to perform validation."
            },
            "test_duration_seconds": {
                "type": [
                    "number"
                ],
                "required": false,
                "description": "The total time, in seconds, that the model took to run predictions on the test set."
            },
            "export_dtg": {
                "type": [
                    "string"
                ],
                "required": true,
                "format": "date-time",
                "description": "UTC timestamp (ISO 8601) when the model was saved."
            },
            "model_file_path": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "Filesystem path to the serialized model file."
            },
            "model_file_hash": {
                "type": [
                    "string"
                ],
                "required": true,
                "description": "SHA-256 hash of the serialized model file."
            },
            "additional_model_properties": {
                "type": [
                    "object"
                ],
                "required": false,
                "description": "Arbitrary, user-supplied key-value metadata that applies ONLY to this model (e.g. data-source tags, business unit, reviewer notes, number of clusters, explained variance, noise, etc).",
                "additionalProperties": true
            },
            "additional_run_properties": {
                "type": [
                    "object"
                ],
                "required": false,
                "description": "Arbitrary, user-supplied key-value metadata that applies to the entire run (e.g. CI job URL, git commit hash, ticket ID).",
                "additionalProperties": true
            }
        },
        "additionalProperties": false
    }
}